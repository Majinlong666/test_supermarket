<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}超市管理系统{% endblock %}</title>
    {% load django_bootstrap5 %}
    {% bootstrap_css %}
    <style>
        .sidebar {min-height: calc(100vh - 56px); background: #f8f9fa; border-right: 1px solid #dee2e6;}
        .content {padding: 20px;}
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'dashboard' %}">超市管理系统</a>
            <div class="navbar-nav ms-auto">
                {% if user.is_authenticated %}
                    <span class="nav-link">欢迎：{{ user.get_full_name|default:user.username }}</span>
                    <a class="nav-link" href="{% url 'logout' %}">退出</a>
                {% else %}
                    <a class="nav-link" href="{% url 'accounts:login' %}">登录</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- 侧边栏（仅登录后显示） -->
            {% if user.is_authenticated %}
                 <div class="col-md-2 sidebar p-3">
                 <ul class="nav flex-column">
                 <li class="nav-item mb-2"><a class="nav-link" href="{% url 'dashboard' %}">首页</a></li>
                 <li class="nav-item mb-2"><a class="nav-link" href="{% url 'sales:order_list' %}">销售单管理</a></li>
                 <li class="nav-item mb-2"><a class="nav-link" href="{% url 'products:product_list' %}">商品管理</a></li>
                 <li class="nav-item mb-2"><a class="nav-link" href="{% url 'suppliers:supplier_list' %}">供应商管理</a></li>
            {% if user.is_superuser %}
               <li class="nav-item mb-2"><a class="nav-link" href="/admin/">后台管理</a></li>
           {% endif %}
    </ul>
</div>
{% endif %} 
            <!-- 主内容区 -->
            <div class="col-md-10 content">
                {% block content %}
                <!-- 消息提示 -->
                {% if messages %}
                    {% for msg in messages %}
                        <div class="alert alert-{{ msg.tags }} alert-dismissible fade show">
                            {{ msg }}
                            <button class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    {% endfor %}
                {% endif %}

                <!-- 页面内容 -->
                {% endblock %}
            </div>
        </div>
    </div>

    {% bootstrap_javascript %}
</body>
</html>
